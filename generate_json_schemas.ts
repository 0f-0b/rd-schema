#!/usr/bin/env -S deno run --allow-write=character.json,level.json

import { zodToJsonSchema } from "./deps/zod_to_json_schema.ts";

import { Character, Clip } from "./character.ts";
import {
  ActionEvent,
  AddClassicBeatEvent,
  AddFreeTimeBeatEvent,
  AddOneshotBeatEvent,
  AdvanceFloatingTextEvent,
  AssignHandsEvent,
  BassDropEvent,
  Bookmark,
  Border,
  CallCustomMethodEvent,
  ChangePlayersRowsEvent,
  Color,
  ColorOrPaletteIndex,
  CommentEvent,
  Conditional,
  ConditionExpression,
  ContentMode,
  CustomConditional,
  CustomFlashEvent,
  Decoration,
  DecorationEvent,
  DisableVFXPresetEvent,
  Easing,
  EnableBloomVFXPresetEvent,
  EnableEaseableVFXPresetEvent,
  EnableOrdinaryVFXPresetEvent,
  EnableScreenVFXPresetEvent,
  Event,
  Expression,
  FadeRoomEvent,
  FinishLevelEvent,
  FlashEvent,
  FlipScreenEvent,
  FloatingTextEvent,
  Hands,
  HideRowEvent,
  HideSpriteEvent,
  ImageSequence,
  InvertColorsEvent,
  Language,
  LanguageConditional,
  LastHitConditional,
  Level,
  MaskRoomEvent,
  MoveCameraEvent,
  MoveRoomEvent,
  MoveRowEvent,
  MoveSpriteEvent,
  NarrateRowInfoEvent,
  NarrationCategory,
  OrdinaryCommentEvent,
  PaintHandsEvent,
  PaintRowsEvent,
  PaintSpriteEvent,
  PlayAnimationEvent,
  Player,
  PlayerModeConditional,
  PlayExpressionEvent,
  PlaySongEvent,
  PlaySoundEvent,
  PulseCameraEvent,
  PulseFreeTimeBeatEvent,
  ReadNarrationEvent,
  ReorderRoomsEvent,
  RoomEvent,
  Row,
  RowEvent,
  RowType,
  SayReadyGetSetGoEvent,
  SetBackgroundEvent,
  SetBeatSoundEvent,
  SetBeatsPerMinuteEvent,
  SetClapSoundsEvent,
  SetCountingSoundEvent,
  SetCrotchetsPerBarEvent,
  SetForegroundEvent,
  SetGameSoundEvent,
  SetHeartExplodeVolumeEvent,
  SetHeartExplosionIntervalEvent,
  SetOneshotWaveEvent,
  SetPlayStyleEvent,
  SetRoomContentModeEvent,
  SetRoomPerspectiveEvent,
  SetRowXsEvent,
  SetSpeedEvent,
  SetThemeEvent,
  Settings,
  SetVFXPresetEvent,
  ShakeScreenEvent,
  ShowDialogueEvent,
  ShowHandsEvent,
  ShowRoomsHorizontallyEvent,
  ShowStatusSignEvent,
  Sound,
  SoundEvent,
  SpriteCommentEvent,
  Strength,
  StutterEvent,
  TagActionEvent,
  TextExplosionEvent,
  TimesExecutedConditional,
  WindowDanceEvent,
} from "./level.ts";

Deno.writeTextFileSync(
  "character.json",
  JSON.stringify(
    Object.assign(
      zodToJsonSchema(Character, {
        definitions: {
          Clip,
          Character,
        },
      }),
      { $id: "https://0f-0b.github.io/rd-schema/character.json" },
    ),
    undefined,
    2,
  ) + "\n",
);
Deno.writeTextFileSync(
  "level.json",
  JSON.stringify(
    Object.assign(
      zodToJsonSchema(Level, {
        definitions: {
          Settings,
          RowType,
          Player,
          Row,
          ConditionExpression,
          Decoration,
          Sound,
          PlaySongEvent,
          SetCrotchetsPerBarEvent,
          PlaySoundEvent,
          SetBeatsPerMinuteEvent,
          SetClapSoundsEvent,
          SetHeartExplodeVolumeEvent,
          SetHeartExplosionIntervalEvent,
          SayReadyGetSetGoEvent,
          SetGameSoundEvent,
          SetBeatSoundEvent,
          SetCountingSoundEvent,
          NarrationCategory,
          ReadNarrationEvent,
          NarrateRowInfoEvent,
          SoundEvent,
          AddClassicBeatEvent,
          SetRowXsEvent,
          AddFreeTimeBeatEvent,
          PulseFreeTimeBeatEvent,
          AddOneshotBeatEvent,
          SetOneshotWaveEvent,
          RowEvent,
          SetThemeEvent,
          EnableOrdinaryVFXPresetEvent,
          ColorOrPaletteIndex,
          Easing,
          EnableBloomVFXPresetEvent,
          EnableScreenVFXPresetEvent,
          EnableEaseableVFXPresetEvent,
          DisableVFXPresetEvent,
          SetVFXPresetEvent,
          ImageSequence,
          ContentMode,
          SetBackgroundEvent,
          SetForegroundEvent,
          SetSpeedEvent,
          FlashEvent,
          CustomFlashEvent,
          MoveCameraEvent,
          HideRowEvent,
          Expression,
          MoveRowEvent,
          PlayExpressionEvent,
          Border,
          PaintRowsEvent,
          Strength,
          BassDropEvent,
          ShakeScreenEvent,
          FlipScreenEvent,
          InvertColorsEvent,
          PulseCameraEvent,
          TextExplosionEvent,
          Language,
          ShowDialogueEvent,
          ShowStatusSignEvent,
          FloatingTextEvent,
          AdvanceFloatingTextEvent,
          ChangePlayersRowsEvent,
          FinishLevelEvent,
          OrdinaryCommentEvent,
          SpriteCommentEvent,
          CommentEvent,
          Hands,
          ShowHandsEvent,
          PaintHandsEvent,
          AssignHandsEvent,
          TagActionEvent,
          SetPlayStyleEvent,
          StutterEvent,
          CallCustomMethodEvent,
          WindowDanceEvent,
          ActionEvent,
          MoveSpriteEvent,
          PaintSpriteEvent,
          PlayAnimationEvent,
          HideSpriteEvent,
          DecorationEvent,
          ShowRoomsHorizontallyEvent,
          MoveRoomEvent,
          ReorderRoomsEvent,
          SetRoomContentModeEvent,
          MaskRoomEvent,
          FadeRoomEvent,
          SetRoomPerspectiveEvent,
          RoomEvent,
          Event,
          LastHitConditional,
          CustomConditional,
          TimesExecutedConditional,
          LanguageConditional,
          PlayerModeConditional,
          Conditional,
          Bookmark,
          Color,
          Level,
        },
      }),
      { $id: "https://0f-0b.github.io/rd-schema/level.json" },
    ),
    undefined,
    2,
  ) + "\n",
);
